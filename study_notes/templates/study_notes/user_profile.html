{% extends "base.html" %}
{% load wagtailcore_tags %}
{% load static %}

{% load custom_filters %}

{% block content %}
    <div class="text-container">
        <div class="text-center" style="text-decoration: none;margin-top:4vh;">
            <span class="h2">{{ users_page|capfirst }}</span><span class="h3">'s profile</span>
        </div>

    <br>
    {% if are_there_cards %}
        <div id="quiz-holder-user-subscribed-cards succ-fail-user-subscribed-cards">
            <div class="card text-center blue-border user-profile-cards">
              <div class="card-header succ-fail-user-subscribed-cards " id="quiz-title-user-subscribed-cards">
                  <span class="card-header-text">All {{ users_page|capfirst }}'s subscribed cards!</span>
                  <div style="float:right;">
                      <span class="badge rounded-pill gradient-bg">Score: <span id="quiz-score-user-subscribed-cards">0</span></span>
                  </div>
              </div>
              <div class="card-body succ-fail-user-subscribed-cards" id = quiz-body-user-subscribed-cards>
                <div class="card-text" id="quiz-q-user-subscribed-cards">{{ first_card_q }}</div>

                <form class="form-group" id="quiz-btn-user-subscribed-cards" onsubmit="return flashcards.quizRunner();">
                    <button class="btn gradient-bg-btn" type="button" onclick="flashcards.quizRunner()">Next</button>
                </form>
                <div class="btn-group btn-group-lg" id="quiz-btn-next-user-subscribed-cards" style="display:none;">
                    <button class="btn btn-danger btn-lg" type="button" onclick="flashcards.nextCard(-1)">{% include "icons/thumbs-down.html" %}</button>
                    <button class="btn btn-primary btn-lg" type="button" onclick="flashcards.nextCard(0)"><span id="quiz-btn-nextspan-user-subscribed-cards">{% include "icons/fastforward-circle.html" %}</span><span id="quiz-btn-restartspan-user-subscribed-cards">{% include "icons/restart-circle.html" %}</span></button>
                    <button class="btn btn-primary btn-lg" type="button" onclick="flashcards.nextCard(0.7)">{% include "icons/smile-happy.html" %}</button>
                    <button class="btn btn-primary btn-lg" type="button" onclick="flashcards.nextCard(1)">{% include "icons/smile-super-happy.html" %}</button>
                    <button class="btn btn-success btn-lg" type="button" onclick="flashcards.nextCard(7)">{% include "icons/thumbs-up.html" %}</button>
                </div>
              </div>
              <div class="card-footer succ-fail-user-subscribed-cards">
                  Card: <span id="quiz-progress-user-subscribed-cards">1 | 1</span>/({{ amount_of_cards }} unique)

              </div>
            </div>
        </div>

        <br>
        {% if users_id == current_user_id %}
            <div class="text-center">
                <a class="link-unstyled" href="{% url 'view_flashcard_stats' %}">
                    <button class="btn btn-lg btn-info">Flashcard Collection</button>
                </a>
            </div>
        {% endif %}
    {% else %}
        <p class="text-center warning">No cards found :C</p>
    {% endif %}
    </div>

{% endblock %}

{% block custom_scripts %}
    <script src="{% static 'js/user_flashcards.js' %}" lang="js">
    </script>
    <script lang="js">
        let flashcards = new UserFlashcards({{ flash_card_list|safe }}, {{ first_card|safe }});
    </script>
{% endblock %}

