{% load crispy_forms_filters %}
{% load tags %}
<div>
    <h{% if hsize %}{% if hsize <= 6 %}{{ hsize }}{% else %}6{% endif %}{% endif %}>{{ content.title }}
    </h{% if hsize %}{% if hsize <= 6 %}{{ hsize }}{% else %}6{% endif %}{% endif %}>
    <br>
    <p>{{ content.text }}</p>
    <div class="btn-group">
        {% if not remove_comment_button %}
        <button class="btn btn-primary" id="comment-button-{{ content.id }}">Comment on this!</button>
        {% endif %}
        {% if content.owner == request.user.normaluser and not content.is_removed %}
            <a class="btn btn-secondary" href="{% url 'modify' content.id is_block|bool_to_int %}">Change</a>
            <form action="{% url 'delete_content' content.id %}" method="post" onclick="return confirm('Are you sure you' +
             ' want to delete this content? This can not be  undone.');">
                {% csrf_token %}
                <button class="btn btn-danger">Delete</button>
            </form>
        {% endif %}
    </div>
    <div class="d-flex justify-content-end">
        <small>{{ content.author }}</small>
    </div>
    <div class="d-flex justify-content-end">
        <small>{{ content.created }}</small>
    </div>
</div>
{% if form and not remove_comment_button %}
<div id="comment-box-{{ content.id }}" style="margin-top:2vh;display: none;">
    <form method="post" action="{% url 'content' content.id %}">
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" value="Submit" class="btn btn-primary">Add comment.</button>
    </form>
</div>

<script>
    document.querySelector("#comment-button-{{ content.id }}").addEventListener("click", () => {
        let display = document.getElementById("comment-box-{{ content.id }}").style.display;
        if (display === "none"){
            document.getElementById("comment-box-{{ content.id }}").style.display = ""
        } else {
            document.getElementById("comment-box-{{ content.id }}").style.display = "none"
        }
    });
</script>
{% endif %}
